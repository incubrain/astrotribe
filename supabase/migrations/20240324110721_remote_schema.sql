revoke delete on table "public"."authors" from "anon";

revoke insert on table "public"."authors" from "anon";

revoke references on table "public"."authors" from "anon";

revoke select on table "public"."authors" from "anon";

revoke trigger on table "public"."authors" from "anon";

revoke truncate on table "public"."authors" from "anon";

revoke update on table "public"."authors" from "anon";

revoke delete on table "public"."authors" from "authenticated";

revoke insert on table "public"."authors" from "authenticated";

revoke references on table "public"."authors" from "authenticated";

revoke select on table "public"."authors" from "authenticated";

revoke trigger on table "public"."authors" from "authenticated";

revoke truncate on table "public"."authors" from "authenticated";

revoke update on table "public"."authors" from "authenticated";

revoke delete on table "public"."authors" from "service_role";

revoke insert on table "public"."authors" from "service_role";

revoke references on table "public"."authors" from "service_role";

revoke select on table "public"."authors" from "service_role";

revoke trigger on table "public"."authors" from "service_role";

revoke truncate on table "public"."authors" from "service_role";

revoke update on table "public"."authors" from "service_role";

revoke delete on table "public"."categories" from "anon";

revoke insert on table "public"."categories" from "anon";

revoke references on table "public"."categories" from "anon";

revoke select on table "public"."categories" from "anon";

revoke trigger on table "public"."categories" from "anon";

revoke truncate on table "public"."categories" from "anon";

revoke update on table "public"."categories" from "anon";

revoke delete on table "public"."categories" from "authenticated";

revoke insert on table "public"."categories" from "authenticated";

revoke references on table "public"."categories" from "authenticated";

revoke select on table "public"."categories" from "authenticated";

revoke trigger on table "public"."categories" from "authenticated";

revoke truncate on table "public"."categories" from "authenticated";

revoke update on table "public"."categories" from "authenticated";

revoke delete on table "public"."categories" from "service_role";

revoke references on table "public"."categories" from "service_role";

revoke trigger on table "public"."categories" from "service_role";

revoke truncate on table "public"."categories" from "service_role";

revoke delete on table "public"."embeddings" from "anon";

revoke insert on table "public"."embeddings" from "anon";

revoke references on table "public"."embeddings" from "anon";

revoke select on table "public"."embeddings" from "anon";

revoke trigger on table "public"."embeddings" from "anon";

revoke truncate on table "public"."embeddings" from "anon";

revoke update on table "public"."embeddings" from "anon";

revoke delete on table "public"."embeddings" from "authenticated";

revoke insert on table "public"."embeddings" from "authenticated";

revoke references on table "public"."embeddings" from "authenticated";

revoke select on table "public"."embeddings" from "authenticated";

revoke trigger on table "public"."embeddings" from "authenticated";

revoke truncate on table "public"."embeddings" from "authenticated";

revoke update on table "public"."embeddings" from "authenticated";

revoke delete on table "public"."embeddings" from "service_role";

revoke references on table "public"."embeddings" from "service_role";

revoke trigger on table "public"."embeddings" from "service_role";

revoke truncate on table "public"."embeddings" from "service_role";

revoke delete on table "public"."news" from "anon";

revoke insert on table "public"."news" from "anon";

revoke references on table "public"."news" from "anon";

revoke select on table "public"."news" from "anon";

revoke trigger on table "public"."news" from "anon";

revoke truncate on table "public"."news" from "anon";

revoke update on table "public"."news" from "anon";

revoke delete on table "public"."news" from "authenticated";

revoke insert on table "public"."news" from "authenticated";

revoke references on table "public"."news" from "authenticated";

revoke select on table "public"."news" from "authenticated";

revoke trigger on table "public"."news" from "authenticated";

revoke truncate on table "public"."news" from "authenticated";

revoke update on table "public"."news" from "authenticated";

revoke delete on table "public"."news" from "service_role";

revoke references on table "public"."news" from "service_role";

revoke trigger on table "public"."news" from "service_role";

revoke truncate on table "public"."news" from "service_role";

revoke delete on table "public"."news_authors" from "anon";

revoke insert on table "public"."news_authors" from "anon";

revoke references on table "public"."news_authors" from "anon";

revoke select on table "public"."news_authors" from "anon";

revoke trigger on table "public"."news_authors" from "anon";

revoke truncate on table "public"."news_authors" from "anon";

revoke update on table "public"."news_authors" from "anon";

revoke delete on table "public"."news_authors" from "authenticated";

revoke insert on table "public"."news_authors" from "authenticated";

revoke references on table "public"."news_authors" from "authenticated";

revoke select on table "public"."news_authors" from "authenticated";

revoke trigger on table "public"."news_authors" from "authenticated";

revoke truncate on table "public"."news_authors" from "authenticated";

revoke update on table "public"."news_authors" from "authenticated";

revoke delete on table "public"."news_authors" from "service_role";

revoke insert on table "public"."news_authors" from "service_role";

revoke references on table "public"."news_authors" from "service_role";

revoke select on table "public"."news_authors" from "service_role";

revoke trigger on table "public"."news_authors" from "service_role";

revoke truncate on table "public"."news_authors" from "service_role";

revoke update on table "public"."news_authors" from "service_role";

revoke delete on table "public"."news_embeddings" from "anon";

revoke insert on table "public"."news_embeddings" from "anon";

revoke references on table "public"."news_embeddings" from "anon";

revoke select on table "public"."news_embeddings" from "anon";

revoke trigger on table "public"."news_embeddings" from "anon";

revoke truncate on table "public"."news_embeddings" from "anon";

revoke update on table "public"."news_embeddings" from "anon";

revoke delete on table "public"."news_embeddings" from "authenticated";

revoke insert on table "public"."news_embeddings" from "authenticated";

revoke references on table "public"."news_embeddings" from "authenticated";

revoke select on table "public"."news_embeddings" from "authenticated";

revoke trigger on table "public"."news_embeddings" from "authenticated";

revoke truncate on table "public"."news_embeddings" from "authenticated";

revoke update on table "public"."news_embeddings" from "authenticated";

revoke delete on table "public"."news_embeddings" from "service_role";

revoke references on table "public"."news_embeddings" from "service_role";

revoke trigger on table "public"."news_embeddings" from "service_role";

revoke truncate on table "public"."news_embeddings" from "service_role";

revoke delete on table "public"."news_tags" from "anon";

revoke insert on table "public"."news_tags" from "anon";

revoke references on table "public"."news_tags" from "anon";

revoke select on table "public"."news_tags" from "anon";

revoke trigger on table "public"."news_tags" from "anon";

revoke truncate on table "public"."news_tags" from "anon";

revoke update on table "public"."news_tags" from "anon";

revoke delete on table "public"."news_tags" from "authenticated";

revoke insert on table "public"."news_tags" from "authenticated";

revoke references on table "public"."news_tags" from "authenticated";

revoke select on table "public"."news_tags" from "authenticated";

revoke trigger on table "public"."news_tags" from "authenticated";

revoke truncate on table "public"."news_tags" from "authenticated";

revoke update on table "public"."news_tags" from "authenticated";

revoke delete on table "public"."news_tags" from "service_role";

revoke references on table "public"."news_tags" from "service_role";

revoke trigger on table "public"."news_tags" from "service_role";

revoke truncate on table "public"."news_tags" from "service_role";

revoke delete on table "public"."register_interest" from "anon";

revoke insert on table "public"."register_interest" from "anon";

revoke references on table "public"."register_interest" from "anon";

revoke select on table "public"."register_interest" from "anon";

revoke trigger on table "public"."register_interest" from "anon";

revoke truncate on table "public"."register_interest" from "anon";

revoke update on table "public"."register_interest" from "anon";

revoke delete on table "public"."register_interest" from "authenticated";

revoke insert on table "public"."register_interest" from "authenticated";

revoke references on table "public"."register_interest" from "authenticated";

revoke select on table "public"."register_interest" from "authenticated";

revoke trigger on table "public"."register_interest" from "authenticated";

revoke truncate on table "public"."register_interest" from "authenticated";

revoke update on table "public"."register_interest" from "authenticated";

revoke delete on table "public"."register_interest" from "service_role";

revoke references on table "public"."register_interest" from "service_role";

revoke trigger on table "public"."register_interest" from "service_role";

revoke truncate on table "public"."register_interest" from "service_role";

revoke delete on table "public"."roles" from "anon";

revoke insert on table "public"."roles" from "anon";

revoke references on table "public"."roles" from "anon";

revoke select on table "public"."roles" from "anon";

revoke trigger on table "public"."roles" from "anon";

revoke truncate on table "public"."roles" from "anon";

revoke update on table "public"."roles" from "anon";

revoke delete on table "public"."roles" from "authenticated";

revoke insert on table "public"."roles" from "authenticated";

revoke references on table "public"."roles" from "authenticated";

revoke select on table "public"."roles" from "authenticated";

revoke trigger on table "public"."roles" from "authenticated";

revoke truncate on table "public"."roles" from "authenticated";

revoke update on table "public"."roles" from "authenticated";

revoke delete on table "public"."roles" from "service_role";

revoke references on table "public"."roles" from "service_role";

revoke trigger on table "public"."roles" from "service_role";

revoke truncate on table "public"."roles" from "service_role";

revoke delete on table "public"."seo_data" from "anon";

revoke insert on table "public"."seo_data" from "anon";

revoke references on table "public"."seo_data" from "anon";

revoke select on table "public"."seo_data" from "anon";

revoke trigger on table "public"."seo_data" from "anon";

revoke truncate on table "public"."seo_data" from "anon";

revoke update on table "public"."seo_data" from "anon";

revoke delete on table "public"."seo_data" from "authenticated";

revoke insert on table "public"."seo_data" from "authenticated";

revoke references on table "public"."seo_data" from "authenticated";

revoke select on table "public"."seo_data" from "authenticated";

revoke trigger on table "public"."seo_data" from "authenticated";

revoke truncate on table "public"."seo_data" from "authenticated";

revoke update on table "public"."seo_data" from "authenticated";

revoke delete on table "public"."seo_data" from "service_role";

revoke references on table "public"."seo_data" from "service_role";

revoke trigger on table "public"."seo_data" from "service_role";

revoke truncate on table "public"."seo_data" from "service_role";

revoke delete on table "public"."statuses" from "anon";

revoke insert on table "public"."statuses" from "anon";

revoke references on table "public"."statuses" from "anon";

revoke select on table "public"."statuses" from "anon";

revoke trigger on table "public"."statuses" from "anon";

revoke truncate on table "public"."statuses" from "anon";

revoke update on table "public"."statuses" from "anon";

revoke delete on table "public"."statuses" from "authenticated";

revoke insert on table "public"."statuses" from "authenticated";

revoke references on table "public"."statuses" from "authenticated";

revoke select on table "public"."statuses" from "authenticated";

revoke trigger on table "public"."statuses" from "authenticated";

revoke truncate on table "public"."statuses" from "authenticated";

revoke update on table "public"."statuses" from "authenticated";

revoke delete on table "public"."statuses" from "service_role";

revoke references on table "public"."statuses" from "service_role";

revoke trigger on table "public"."statuses" from "service_role";

revoke truncate on table "public"."statuses" from "service_role";

revoke delete on table "public"."summaries" from "anon";

revoke insert on table "public"."summaries" from "anon";

revoke references on table "public"."summaries" from "anon";

revoke select on table "public"."summaries" from "anon";

revoke trigger on table "public"."summaries" from "anon";

revoke truncate on table "public"."summaries" from "anon";

revoke update on table "public"."summaries" from "anon";

revoke delete on table "public"."summaries" from "authenticated";

revoke insert on table "public"."summaries" from "authenticated";

revoke references on table "public"."summaries" from "authenticated";

revoke select on table "public"."summaries" from "authenticated";

revoke trigger on table "public"."summaries" from "authenticated";

revoke truncate on table "public"."summaries" from "authenticated";

revoke update on table "public"."summaries" from "authenticated";

revoke delete on table "public"."summaries" from "service_role";

revoke insert on table "public"."summaries" from "service_role";

revoke references on table "public"."summaries" from "service_role";

revoke select on table "public"."summaries" from "service_role";

revoke trigger on table "public"."summaries" from "service_role";

revoke truncate on table "public"."summaries" from "service_role";

revoke update on table "public"."summaries" from "service_role";

revoke delete on table "public"."tags" from "anon";

revoke insert on table "public"."tags" from "anon";

revoke references on table "public"."tags" from "anon";

revoke select on table "public"."tags" from "anon";

revoke trigger on table "public"."tags" from "anon";

revoke truncate on table "public"."tags" from "anon";

revoke update on table "public"."tags" from "anon";

revoke delete on table "public"."tags" from "authenticated";

revoke insert on table "public"."tags" from "authenticated";

revoke references on table "public"."tags" from "authenticated";

revoke select on table "public"."tags" from "authenticated";

revoke trigger on table "public"."tags" from "authenticated";

revoke truncate on table "public"."tags" from "authenticated";

revoke update on table "public"."tags" from "authenticated";

revoke delete on table "public"."tags" from "service_role";

revoke references on table "public"."tags" from "service_role";

revoke trigger on table "public"."tags" from "service_role";

revoke truncate on table "public"."tags" from "service_role";

revoke delete on table "public"."user_followers" from "anon";

revoke insert on table "public"."user_followers" from "anon";

revoke references on table "public"."user_followers" from "anon";

revoke select on table "public"."user_followers" from "anon";

revoke trigger on table "public"."user_followers" from "anon";

revoke truncate on table "public"."user_followers" from "anon";

revoke update on table "public"."user_followers" from "anon";

revoke delete on table "public"."user_followers" from "authenticated";

revoke insert on table "public"."user_followers" from "authenticated";

revoke references on table "public"."user_followers" from "authenticated";

revoke select on table "public"."user_followers" from "authenticated";

revoke trigger on table "public"."user_followers" from "authenticated";

revoke truncate on table "public"."user_followers" from "authenticated";

revoke update on table "public"."user_followers" from "authenticated";

revoke delete on table "public"."user_followers" from "service_role";

revoke references on table "public"."user_followers" from "service_role";

revoke trigger on table "public"."user_followers" from "service_role";

revoke truncate on table "public"."user_followers" from "service_role";

revoke delete on table "public"."users" from "anon";

revoke insert on table "public"."users" from "anon";

revoke references on table "public"."users" from "anon";

revoke select on table "public"."users" from "anon";

revoke trigger on table "public"."users" from "anon";

revoke truncate on table "public"."users" from "anon";

revoke update on table "public"."users" from "anon";

revoke delete on table "public"."users" from "authenticated";

revoke insert on table "public"."users" from "authenticated";

revoke references on table "public"."users" from "authenticated";

revoke select on table "public"."users" from "authenticated";

revoke trigger on table "public"."users" from "authenticated";

revoke truncate on table "public"."users" from "authenticated";

revoke update on table "public"."users" from "authenticated";

revoke delete on table "public"."users" from "service_role";

revoke references on table "public"."users" from "service_role";

revoke trigger on table "public"."users" from "service_role";

revoke truncate on table "public"."users" from "service_role";

alter table "public"."news_authors" drop constraint "news_authors_author_id_fkey";

alter table "public"."news_authors" drop constraint "news_authors_news_id_fkey";

alter table "public"."summaries" drop constraint "summaries_news_id_fkey";

alter table "public"."users" drop constraint "users_id_key";

alter table "public"."authors" drop constraint "authors_pkey";

alter table "public"."news_authors" drop constraint "news_authors_pkey";

alter table "public"."summaries" drop constraint "summaries_pkey";

drop index if exists "public"."authors_link_key";

drop index if exists "public"."authors_name_key";

drop index if exists "public"."authors_pkey";

drop index if exists "public"."news_authors_pkey";

drop index if exists "public"."summaries_pkey";

drop index if exists "public"."users_id_key";

drop index if exists "public"."tags_name_key";

drop index if exists "public"."users_auth_id_key";

drop table "public"."authors";

drop table "public"."news_authors";

drop table "public"."summaries";

alter table "public"."news" drop column "link";

alter table "public"."news" add column "author" text;

alter table "public"."news" add column "description" text;

alter table "public"."news" add column "featured_image" text;

alter table "public"."news" add column "has_summary" boolean not null default false;

alter table "public"."news" add column "published_at" timestamp with time zone;

alter table "public"."news" add column "source" character varying not null;

alter table "public"."news" add column "url" text not null;

alter table "public"."news" alter column "body" set data type text using "body"::text;

alter table "public"."news" alter column "category_id" set default '31'::bigint;

alter table "public"."news" alter column "updated_at" set default now();

alter table "public"."roles" enable row level security;

alter table "public"."tags" drop column "name";

alter table "public"."tags" add column "body" text;

alter table "public"."tags" add column "created_at" time with time zone default now();

alter table "public"."tags" add column "title" text not null;

alter table "public"."tags" add column "updated_at" time with time zone default now();

alter table "public"."users" drop column "auth_id";

alter table "public"."users" drop column "follow_count";

alter table "public"."users" add column "followers_count" integer default 0;

alter table "public"."users" alter column "id" drop identity;
ALTER TABLE "public"."users" ADD COLUMN "temp_id" UUID DEFAULT uuid_generate_v4();
ALTER TABLE "public"."users" DROP COLUMN "id";
ALTER TABLE "public"."users" RENAME COLUMN "temp_id" TO "id";

alter table "public"."users" enable row level security;

drop sequence if exists "public"."authors_id_seq";

drop sequence if exists "public"."news_authors_id_seq";

drop sequence if exists "public"."summaries_id_seq";

CREATE UNIQUE INDEX news_url_key ON public.news USING btree (url);

CREATE UNIQUE INDEX tags_name_key ON public.tags USING btree (title);

CREATE UNIQUE INDEX users_auth_id_key ON public.users USING btree (id);

alter table "public"."news" add constraint "news_url_key" UNIQUE using index "news_url_key";
alter table "public"."users" add constraint "users_id_fkey" FOREIGN KEY (id) REFERENCES auth.users(id) not valid;
alter table "public"."users" validate constraint "users_id_fkey";


set check_function_bodies = off;

CREATE OR REPLACE FUNCTION public.create_user_in_public()
 RETURNS trigger
 LANGUAGE plpgsql
 SECURITY DEFINER
 SET search_path TO 'public'
AS $function$
BEGIN
  INSERT INTO public.users (id, email)
  VALUES (new.id, new.email)
  ON CONFLICT (id) DO NOTHING;

  RETURN new;
END;
$function$
;



grant update on table "public"."users" to "authenticator";

grant insert on table "public"."users" to "supabase_auth_admin";

create policy "Enable read access for all users"
on "public"."roles"
as permissive
for select
to public
using (true);


create policy "Enable read access for all users"
on "public"."users"
as permissive
for select
to public
using (true);


create policy "Enable update for users based on email"
on "public"."users"
as permissive
for update
to public
using (((auth.jwt() ->> 'email'::text) = email))
with check (((auth.jwt() ->> 'email'::text) = email));




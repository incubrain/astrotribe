generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["multiSchema", "postgresqlExtensions", "views"]
  binaryTargets   = ["native"]
  engineType      = "binary"
}

generator zod {
  provider                  = "pnpm exec zod-prisma-types"
  useDecimalJs              = "false"
  addSelectType             = "false"
  validateWhereUniqueInput  = "false"
  createRelationValuesTypes = "false"
  generateSelectHelpers     = "false"
  createModelTypes          = "true"
  addInputTypeValidation    = "false"
  createPartialTypes        = "false"
  addIncludeType            = "false"
  createInputTypes          = "false"
}

datasource db {
  provider   = "postgresql"
  url        = env("DATABASE_URL")
  directUrl  = env("DATABASE_DIRECT_URL")
  extensions = [uuid_ossp(map: "uuid-ossp", schema: "extensions")]
  schemas    = ["auth", "public"]
}

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.

/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// This model or at least one of its fields has comments in the database, and requires an additional setup for migrations: Read more: https://pris.ly/d/database-comments
/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.

/// @client.name="ad_daily_metrics"
model AdDailyMetrics {
  id          String      @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  variant_id  String?     @db.Uuid
  date        DateTime    @db.Date
  views       Int?        @default(0)
  clicks      Int?        @default(0)
  created_at  DateTime?   @default(now()) @db.Timestamptz(6)
  updated_at  DateTime?   @default(now()) @db.Timestamptz(6)
  ad_variants AdVariants? @relation(fields: [variant_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([variant_id, date])
  @@index([variant_id, date], map: "idx_ad_metrics_date")
  @@map("ad_daily_metrics")
  @@schema("public")
}

/// @client.name="ad_packages"
model AdPackages {
  id             String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name           String    @db.VarChar(255)
  position       String    @db.VarChar(50)
  active         Boolean?  @default(true)
  created_at     DateTime? @default(now()) @db.Timestamptz(6)
  updated_at     DateTime? @default(now()) @db.Timestamptz(6)
  description    String
  price          Decimal   @db.Decimal(10, 2)
  features       String[]
  expected_ctr   Decimal?  @db.Decimal(5, 2)
  avg_roi        Decimal?  @db.Decimal(5, 2)
  view_frequency Decimal?  @default(1.0) @db.Decimal(4, 2)
  ads            Ads[]

  @@map("ad_packages")
  @@schema("public")
}

/// @client.name="ad_variants"
model AdVariants {
  id                  String           @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  ad_id               String           @db.Uuid
  content             Json
  is_control          Boolean?         @default(false)
  active              Boolean?         @default(true)
  created_at          DateTime?        @default(now()) @db.Timestamptz(6)
  updated_at          DateTime?        @default(now()) @db.Timestamptz(6)
  performance_metrics Json?            @default("{\"ctr\": null, \"bounceRate\": null, \"avgEngagementTime\": null}")
  ad_daily_metrics    AdDailyMetrics[]
  ads                 Ads              @relation(fields: [ad_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("ad_variants")
  @@schema("public")
}

/// @client.name="addresses"
model Addresses {
  id            Int           @id
  street1       String        @db.VarChar(255)
  street2       String?       @db.VarChar(255)
  city_id       Int
  country_id    Int
  name          String?       @db.VarChar
  user_id       String?       @db.Uuid
  is_primary    Boolean?      @default(false)
  address_type  AddressType?
  created_at    DateTime?     @default(now()) @db.Timestamptz(6)
  updated_at    DateTime?     @default(now()) @db.Timestamptz(6)
  company_id    String?       @db.Uuid
  cities        Cities        @relation(fields: [city_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_city")
  countries     Countries     @relation(fields: [country_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_country")
  companies     Companies?    @relation(fields: [company_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "public_addresses_company_id_fkey")
  user_profiles UserProfiles? @relation(fields: [user_id], references: [id], onDelete: Cascade, map: "public_addresses_user_id_fkey")

  @@index([city_id], map: "idx_addresses_city_id")
  @@index([country_id], map: "idx_addresses_country_id")
  @@map("addresses")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// @client.name="ads"
model Ads {
  id          String       @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  company_id  String?      @db.Uuid
  package_id  String?      @db.Uuid
  start_date  DateTime     @db.Timestamptz(6)
  end_date    DateTime     @db.Timestamptz(6)
  active      Boolean?     @default(true)
  created_at  DateTime?    @default(now()) @db.Timestamptz(6)
  updated_at  DateTime?    @default(now()) @db.Timestamptz(6)
  ad_variants AdVariants[]
  companies   Companies?   @relation(fields: [company_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  ad_packages AdPackages?  @relation(fields: [package_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([start_date, end_date], map: "idx_ads_dates")
  @@map("ads")
  @@schema("public")
}

/// @client.name="astronomy_events"
model AstronomyEvents {
  created_at  DateTime @default(now()) @db.Timestamptz(6)
  title       String
  category    String?
  date        String?
  time        String?
  description String?
  id          String   @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid

  @@map("astronomy_events")
  @@schema("public")
}

/// @client.name="blacklisted_domains"
model BlacklistedDomains {
  id         String   @id @default(dbgenerated("extensions.gen_random_uuid()")) @db.Uuid
  created_at DateTime @default(now()) @db.Timestamptz(6)
  url        String   @unique
  reason     String?

  @@map("blacklisted_domains")
  @@schema("public")
}

/// @client.name="blacklisted_urls"
model BlacklistedUrls {
  id         Int        @id @default(autoincrement())
  url        String     @unique
  reason     String?
  created_at DateTime?  @default(now()) @db.Timestamp(6)
  company_id String?    @db.Uuid
  companies  Companies? @relation(fields: [company_id], references: [id], onDelete: Cascade, map: "public_blacklisted_urls_company_id_fkey")

  @@index([url], map: "idx_blacklisted_urls_url")
  @@map("blacklisted_urls")
  @@schema("public")
}

/// @client.name="blocked_ips"
model BlockedIps {
  id              String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  ip_address      String    @db.Inet
  blocked_at      DateTime? @default(now()) @db.Timestamptz(6)
  blocked_until   DateTime  @db.Timestamptz(6)
  failed_attempts Int?      @default(1)
  reason          String?
  created_at      DateTime? @default(now()) @db.Timestamptz(6)
  updated_at      DateTime? @default(now()) @db.Timestamptz(6)

  @@index([ip_address], map: "idx_blocked_ips_ip")
  @@index([blocked_until], map: "idx_blocked_until")
  @@map("blocked_ips")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// @client.name="bookmark_folders"
model BookmarkFolders {
  id                     String                @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id                String                @db.Uuid
  name                   String                @db.VarChar(255)
  color                  String?               @default("#94A3B8") @db.VarChar(7)
  parent_id              String?               @db.Uuid
  is_default             Boolean?              @default(false)
  is_favorite            Boolean?              @default(false)
  position               Int?                  @default(0)
  path                   Unsupported("ltree")?
  created_at             DateTime?             @default(now()) @db.Timestamptz(6)
  updated_at             DateTime?             @default(now()) @db.Timestamptz(6)
  bookmark_folders       BookmarkFolders?      @relation("bookmark_foldersTobookmark_folders", fields: [parent_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  other_bookmark_folders BookmarkFolders[]     @relation("bookmark_foldersTobookmark_folders")
  users                  Users                 @relation(fields: [user_id], references: [id], onDelete: Cascade)
  bookmarks              Bookmarks[]

  @@index([path], type: Gist)
  @@map("bookmark_folders")
  @@schema("public")
}

/// @client.name="bookmarks"
model Bookmarks {
  id               String           @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id          String           @db.Uuid
  content_id       String           @db.Uuid
  content_type     String           @db.VarChar(50)
  created_at       DateTime?        @default(now()) @db.Timestamptz(6)
  folder_id        String?          @db.Uuid
  metadata         Json?
  updated_at       DateTime?        @default(now()) @db.Timestamptz(6)
  contents         Contents         @relation(fields: [content_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "bookmarks_content_fk")
  bookmark_folders BookmarkFolders? @relation(fields: [folder_id], references: [id], onUpdate: NoAction)
  users            Users            @relation(fields: [user_id], references: [id], onDelete: Cascade)

  @@unique([user_id, content_type, content_id])
  @@index([folder_id], map: "idx_bookmarks_folder")
  @@index([user_id, content_type], map: "idx_bookmarks_user_content")
  @@map("bookmarks")
  @@schema("public")
}

/// @client.name="business_domains"
model BusinessDomains {
  id                     String            @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  name                   String            @unique(map: "unique_domain_name") @db.VarChar(100)
  slug                   String            @unique(map: "unique_domain_slug") @db.VarChar(100)
  description            String?
  parent_id              String?           @db.Uuid
  created_at             DateTime?         @default(now()) @db.Timestamptz(6)
  updated_at             DateTime?         @default(now()) @db.Timestamptz(6)
  business_domains       BusinessDomains?  @relation("business_domainsTobusiness_domains", fields: [parent_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  other_business_domains BusinessDomains[] @relation("business_domainsTobusiness_domains")
  categorized_urls       CategorizedUrls[]

  @@index([parent_id], map: "idx_business_domains_parent_id")
  @@map("business_domains")
  @@schema("public")
}

/// @client.name="categories"
model Categories {
  id                 BigInt              @id @default(autoincrement())
  created_at         DateTime            @default(now()) @db.Timestamptz(6)
  updated_at         DateTime?           @default(now()) @db.Timestamptz(6)
  body               String?             @db.VarChar(255)
  name               String              @unique(map: "categories_title_key") @db.VarChar(255)
  document_id        String?             @db.VarChar(255)
  locale             String?             @db.VarChar(255)
  published_at       String?             @db.VarChar(255)
  companies          Companies[]
  content_categories ContentCategories[]
  feed_categories    FeedCategories[]
  news               News[]

  @@map("categories")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// @client.name="categorized_urls"
model CategorizedUrls {
  id                  String          @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  domain_id           String          @db.Uuid
  confidence          Decimal         @db.Decimal(5, 4)
  categorizer_version String          @db.VarChar(20)
  created_at          DateTime?       @default(now()) @db.Timestamptz(6)
  found_on            String          @unique(map: "unique_normalized_url")
  url                 String
  priority            Int             @db.SmallInt
  business_domains    BusinessDomains @relation(fields: [domain_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([domain_id], map: "idx_categorized_urls_domain_id")
  @@index([found_on], map: "idx_categorized_urls_normalized_url")
  @@index([priority], map: "idx_categorized_urls_priority")
  @@map("categorized_urls")
  @@schema("public")
}

/// @client.name="circuit_breaker_states"
model CircuitBreakerStates {
  id            String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  job_name      String    @unique
  state         String    @default("closed")
  failure_count Int?      @default(0)
  last_failure  DateTime? @db.Timestamptz(6)
  last_success  DateTime? @db.Timestamptz(6)
  created_at    DateTime? @default(now()) @db.Timestamptz(6)
  updated_at    DateTime? @default(now()) @db.Timestamptz(6)

  @@index([job_name], map: "idx_circuit_breaker_job_name")
  @@map("circuit_breaker_states")
  @@schema("public")
}

/// @client.name="cities"
model Cities {
  id         Int         @id
  name       String      @unique @db.VarChar(100)
  country_id Int
  state      String?     @db.VarChar
  addresses  Addresses[]
  countries  Countries   @relation(fields: [country_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_country")

  @@index([country_id], map: "idx_cities_country_id")
  @@map("cities")
  @@schema("public")
}

/// @client.name="comments"
model Comments {
  id                String       @id @default(dbgenerated("extensions.gen_random_uuid()")) @db.Uuid
  content           String
  user_id           String       @db.Uuid
  content_id        String       @db.Uuid
  content_type      ContentType
  parent_comment_id String?      @db.Uuid
  created_at        DateTime?    @default(now()) @db.Timestamptz(6)
  updated_at        DateTime?    @default(now()) @db.Timestamptz(6)
  comments          Comments?    @relation("commentsTocomments", fields: [parent_comment_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  other_comments    Comments[]   @relation("commentsTocomments")
  user_profiles     UserProfiles @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([content_id, content_type], map: "idx_comments_content")
  @@map("comments")
  @@schema("public")
}

/// This model contains an index with non-default null sort order and requires additional setup for migrations. Visit https://pris.ly/d/default-index-null-ordering for more info.
/// @client.name="companies"
model Companies {
  name             String?           @db.VarChar(255)
  description      String?
  logo_url         String?
  url              String            @unique(map: "companies_website_url_key")
  social_media_id  Int?
  scrape_frequency ScrapeFrequency?  @default(monthly)
  category_id      BigInt?
  created_at       DateTime?         @default(now()) @db.Timestamptz(6)
  updated_at       DateTime?         @default(now()) @db.Timestamptz(6)
  founding_year    Int?              @db.SmallInt
  is_government    Boolean?          @default(false)
  category         String?
  failed_count     Int?              @default(0) @db.SmallInt
  is_english       Boolean?
  scrape_rating    Int?              @db.SmallInt
  id               String            @id @unique(map: "companies_id_key1") @db.Uuid
  scraped_at       DateTime?         @db.Timestamptz(6)
  content_status   ContentStatus     @default(draft)
  keywords         Json?
  job_url          String?
  addresses        Addresses[]
  ads              Ads[]
  blacklisted_urls BlacklistedUrls[]
  social_media     SocialMedia?      @relation(fields: [social_media_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_social_media")
  categories       Categories?       @relation(fields: [category_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "public_companies_category_id_fkey")
  company_contacts CompanyContacts[]
  company_extras   CompanyExtras[]
  contacts         Contacts[]
  content_sources  ContentSources[]
  jobs             Jobs[]
  news             News[]

  @@index([category_id], map: "idx_companies_category")
  @@index([content_status], map: "idx_companies_content_status")
  @@index([failed_count], map: "idx_companies_failed_count")
  @@index([name], map: "idx_companies_name")
  @@index([scraped_at], map: "idx_companies_scraped_at")
  @@map("companies")
  @@schema("public")
}

/// @client.name="company_contacts"
model CompanyContacts {
  id         Int        @id @default(autoincrement())
  contact_id Int
  created_at DateTime   @default(now()) @db.Timestamptz(6)
  updated_at DateTime   @default(now()) @db.Timestamptz(6)
  company_id String?    @db.Uuid
  companies  Companies? @relation(fields: [company_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_company")
  contacts   Contacts   @relation(fields: [contact_id], references: [id], onDelete: Cascade, map: "fk_contact")

  @@index([contact_id], map: "idx_cc_contact_id")
  @@map("company_contacts")
  @@schema("public")
}

/// @client.name="company_employees"
model CompanyEmployees {
  role            String
  job_description String?
  start_date      DateTime?    @default(now()) @db.Timestamptz(6)
  end_date        DateTime?    @db.Timestamptz(6)
  status          Boolean?
  access_level    AccessLevel  @default(viewer)
  created_at      DateTime?    @default(now()) @db.Timestamptz(6)
  updated_at      DateTime?    @default(now()) @db.Timestamptz(6)
  company_id      String?      @db.Uuid
  user_id         String       @db.Uuid
  id              String       @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_profiles   UserProfiles @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("company_employees")
  @@schema("public")
}

/// @client.name="company_extras"
model CompanyExtras {
  id          Int        @id @default(autoincrement())
  updated_at  DateTime   @default(now()) @db.Timestamptz(6)
  created_at  DateTime   @default(now()) @db.Timestamptz(6)
  url         String     @unique(map: "idx_ce_unique_url")
  success     Boolean?
  category    String
  level       Int        @db.SmallInt
  company_id  String?    @db.Uuid
  body        String?
  found_count Int?       @default(1)
  review      Json?
  companies   Companies? @relation(fields: [company_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_company")

  @@map("company_extras")
  @@schema("public")
}

/// @client.name="company_metrics"
model CompanyMetrics {
  id                 BigInt             @id @default(autoincrement())
  crawl_id           String             @db.Uuid
  company_id         String             @db.Uuid
  metric_id          Int?
  timestamp          DateTime           @db.Timestamptz(6)
  value              Json
  metric_definitions MetricDefinitions? @relation(fields: [metric_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([company_id, crawl_id, metric_id, timestamp], map: "idx_company_metrics_company")
  @@map("company_metrics")
  @@schema("public")
}

/// @client.name="contacts"
model Contacts {
  id               Int               @id
  title            String?           @db.VarChar(100)
  is_primary       Boolean?          @default(false)
  email            String?           @db.VarChar(255)
  contact_type     ContactType?
  privacy_level    PrivacyLevel?
  user_id          String?           @db.Uuid
  created_at       DateTime?         @default(now()) @db.Timestamp(6)
  updated_at       DateTime?         @default(now()) @db.Timestamp(6)
  phone            String?           @db.VarChar(50)
  company_id       String?           @db.Uuid
  company_contacts CompanyContacts[]
  companies        Companies?        @relation(fields: [company_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_company")
  user_profiles    UserProfiles?     @relation(fields: [user_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_user")

  @@map("contacts")
  @@schema("public")
}

/// @client.name="content_categories"
model ContentCategories {
  content_id  String     @db.Uuid
  category_id BigInt
  is_primary  Boolean
  categories  Categories @relation(fields: [category_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  contents    Contents   @relation(fields: [content_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@id([content_id, category_id])
  @@index([category_id, is_primary], map: "idx_content_categories")
  @@map("content_categories")
  @@schema("public")
}

/// @client.name="content_source_visits"
model ContentSourceVisits {
  id            String        @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  content_id    String        @db.Uuid
  user_id       String?       @db.Uuid
  created_at    DateTime?     @default(now()) @db.Timestamptz(6)
  contents      Contents      @relation(fields: [content_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  user_profiles UserProfiles? @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([content_id], map: "idx_content_source_visits_content_id")
  @@index([created_at], map: "idx_content_source_visits_created_at")
  @@index([user_id], map: "idx_content_source_visits_user_id")
  @@map("content_source_visits")
  @@schema("public")
}

/// @client.name="content_sources"
model ContentSources {
  id               BigInt          @id(map: "content_sources_pkey1") @default(autoincrement())
  url              String          @unique(map: "content_sources_url_key1")
  content_type     ContentType
  scrape_frequency ScrapeFrequency
  created_at       DateTime?       @default(now()) @db.Timestamptz(6)
  updated_at       DateTime?       @default(now()) @db.Timestamptz(6)
  refreshed_at     DateTime?       @db.Timestamptz(6)
  has_failed       Boolean?        @default(false)
  failed_count     Int?            @default(0) @db.SmallInt
  priority         Priority
  hash             BigInt?
  scraped_at       DateTime?       @db.Timestamptz(6)
  expected_count   Int?            @default(10) @db.SmallInt
  company_id       String?         @db.Uuid
  rss_urls         String[]
  companies        Companies?      @relation(fields: [company_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  feed_sources     FeedSources[]
  jobs             Jobs[]
  news             News[]

  @@index([url], map: "idx_content_sources_url")
  @@map("content_sources")
  @@schema("public")
}

/// @client.name="content_statuses"
model ContentStatuses {
  id             String        @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  content_id     String        @db.Uuid
  notes          String?
  created_at     DateTime?     @default(now()) @db.Timestamptz(6)
  content_status ContentStatus
  contents       Contents      @relation(fields: [content_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([content_id], map: "idx_content_statuses_content_id")
  @@map("content_statuses")
  @@schema("public")
}

/// @client.name="content_tags"
model ContentTags {
  content_id String   @db.Uuid
  tag_id     Int
  contents   Contents @relation(fields: [content_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  tags       Tags     @relation(fields: [tag_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@id([content_id, tag_id])
  @@index([tag_id], map: "idx_content_tags")
  @@map("content_tags")
  @@schema("public")
}

/// @client.name="contents"
model Contents {
  id                    String                @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  content_type          ContentType           @default(companies)
  title                 String?
  created_at            DateTime?             @default(now()) @db.Timestamptz(6)
  updated_at            DateTime?             @default(now()) @db.Timestamptz(6)
  url                   String                @unique
  hot_score             Float?                @default(0)
  rss_url               String?
  bookmarks             Bookmarks[]
  content_categories    ContentCategories[]
  content_source_visits ContentSourceVisits[]
  content_statuses      ContentStatuses[]
  content_tags          ContentTags[]
  jobs                  Jobs?
  news                  News?
  newsletters           Newsletters?
  research              Research?

  @@index([content_type], map: "idx_content_type")
  @@map("contents")
  @@schema("public")
}

/// @client.name="countries"
model Countries {
  id        Int         @id
  name      String      @unique @db.VarChar(100)
  code      String      @db.VarChar(2)
  code_3    String?     @db.VarChar
  addresses Addresses[]
  cities    Cities[]

  @@map("countries")
  @@schema("public")
}

/// @client.name="customer_payments"
model CustomerPayments {
  id                     Int                    @id @default(autoincrement())
  user_id                String                 @db.Uuid
  subscription_id        Int?
  payment_provider_id    Int
  external_payment_id    String                 @unique(map: "uq_payment_id") @db.VarChar(255)
  external_order_id      String?                @db.VarChar(255)
  amount                 Decimal                @db.Decimal(10, 2)
  currency               String                 @db.VarChar(3)
  status                 String                 @db.VarChar(50)
  method                 String?                @db.VarChar(50)
  description            String?
  fee                    Decimal?               @db.Decimal(10, 2)
  tax                    Decimal?               @db.Decimal(10, 2)
  error_code             String?                @db.VarChar(50)
  error_description      String?
  acquirer_data          Json?
  notes                  Json?
  created_at             DateTime?              @default(now()) @db.Timestamptz(6)
  order_id               String?
  invoice_id             String?
  international          Boolean?
  amount_refunded        Decimal?               @db.Decimal(10, 2)
  amount_transferred     Decimal?               @db.Decimal(10, 2)
  refund_status          String?
  captured               Boolean?
  bank                   String?
  wallet                 String?
  vpa                    String?
  error_source           String?
  error_step             String?
  error_reason           String?
  payment_providers      PaymentProviders       @relation(fields: [payment_provider_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  customer_subscriptions CustomerSubscriptions? @relation(fields: [subscription_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  user_profiles          UserProfiles           @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  customer_refunds       CustomerRefunds[]

  @@map("customer_payments")
  @@schema("public")
}

/// @client.name="customer_processed_webhooks"
model CustomerProcessedWebhooks {
  id           Int      @id(map: "customers_processed_webhooks_pkey") @default(autoincrement())
  event_id     String   @unique(map: "customers_processed_webhooks_event_id_key")
  event_type   String
  processed_at DateTime @db.Timestamptz(6)

  @@map("customer_processed_webhooks")
  @@schema("public")
}

/// @client.name="customer_refunds"
model CustomerRefunds {
  id                 Int              @id @default(autoincrement())
  payment_id         Int
  external_refund_id String           @db.VarChar(255)
  amount             Decimal          @db.Decimal(10, 2)
  status             String           @db.VarChar(50)
  speed_processed    String?          @db.VarChar(20)
  speed_requested    String?          @db.VarChar(20)
  notes              Json?
  created_at         DateTime?        @default(now()) @db.Timestamptz(6)
  currency           String?
  receipt            String?
  acquirer_data      Json?
  batch_id           String?
  customer_payments  CustomerPayments @relation(fields: [payment_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("customer_refunds")
  @@schema("public")
}

/// @client.name="customer_subscription_offers"
model CustomerSubscriptionOffers {
  id                          String                    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  plan_id                     Int
  is_active                   Boolean
  created_at                  DateTime?                 @default(now()) @db.Timestamptz(6)
  updated_at                  DateTime?                 @default(now()) @db.Timestamptz(6)
  discount                    Decimal?                  @db.Decimal
  discount_type               DiscountType?
  discount_period             DiscountPeriod?
  already_discounted          Boolean?
  expiry_date                 DateTime?                 @db.Timestamptz(6)
  customer_subscription_plans CustomerSubscriptionPlans @relation(fields: [plan_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_offers_plan_id")

  @@index([plan_id], map: "idx_customer_subscription_offers_plan_id")
  @@map("customer_subscription_offers")
  @@schema("public")
}

/// @client.name="customer_subscription_plans"
model CustomerSubscriptionPlans {
  id                     Int                     @id @default(autoincrement())
  external_plan_id       String?                 @unique @db.VarChar(255)
  name                   String                  @db.VarChar(100)
  description            String?
  interval               Int
  interval_type          String                  @db.VarChar(20)
  monthly_amount         Decimal                 @db.Decimal(10, 2)
  annual_amount          Decimal                 @db.Decimal(10, 2)
  currency               String                  @db.VarChar(3)
  features               Json?
  is_active              Boolean?                @default(true)
  created_at             DateTime?               @db.Timestamptz(6)
  updated_at             DateTime?               @db.Timestamptz(6)
  customer_subscriptions CustomerSubscriptions[]
  customer_subscription_offers CustomerSubscriptionOffers[]  // One Plan has many Offers

  @@map("customer_subscription_plans")
  @@schema("public")
}

/// @client.name="customer_subscriptions"
model CustomerSubscriptions {
  id                          Int                       @id @default(autoincrement())
  user_id                     String                    @db.Uuid
  plan_id                     Int
  payment_provider_id         Int
  external_subscription_id    String                    @unique(map: "uq_subscription_id") @db.VarChar(255)
  status                      String                    @db.VarChar(50)
  quantity                    Int?                      @default(1)
  current_start               DateTime?                 @db.Timestamptz(6)
  current_end                 DateTime?                 @db.Timestamptz(6)
  ended_at                    DateTime?                 @db.Timestamptz(6)
  cancel_at_period_end        Boolean?                  @default(false)
  total_count                 Int?
  paid_count                  Int?
  remaining_count             Int?
  auth_attempts               Int?                      @default(0)
  notes                       Json?
  created_at                  DateTime?                 @default(now()) @db.Timestamptz(6)
  updated_at                  DateTime?                 @default(now()) @db.Timestamptz(6)
  type                        Int?
  charge_at                   DateTime?                 @db.Timestamptz(6)
  start_at                    DateTime?                 @db.Timestamptz(6)
  end_at                      DateTime?                 @db.Timestamptz(6)
  customer_notify             Boolean?
  expire_by                   DateTime?                 @db.Timestamptz(6)
  short_url                   String?
  has_scheduled_changes       Boolean?
  change_scheduled_at         DateTime?                 @db.Timestamptz(6)
  source                      String?
  offer_id                    String?
  pause_initiated_by          String?
  cancel_initiated_by         String?
  customer_payments           CustomerPayments[]
  payment_providers           PaymentProviders          @relation(fields: [payment_provider_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  customer_subscription_plans CustomerSubscriptionPlans @relation(fields: [plan_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  user_profiles               UserProfiles              @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("customer_subscriptions")
  @@schema("public")
}

/// @client.name="embedding_reviews"
model EmbeddingReviews {
  id                  BigInt               @id(map: "embedding_review_pkey") @default(autoincrement())
  created_at          DateTime             @default(now()) @db.Timestamptz(6)
  updated_at          DateTime?            @default(now()) @db.Timestamptz(6)
  agent_review        Boolean?             @default(false)
  human_review        Boolean?             @default(false)
  notes               String?
  research_embeddings ResearchEmbeddings[]

  @@map("embedding_reviews")
  @@schema("public")
}

/// @client.name="error_logs"
model ErrorLogs {
  id             String        @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  service_name   String        @db.VarChar(100)
  error_type     ErrorType
  severity       ErrorSeverity
  message        String
  stack_trace    String?
  metadata       Json?         @default("{}")
  context        Json?         @default("{}")
  user_id        String?       @db.Uuid
  request_id     String?       @db.Uuid
  correlation_id String?       @db.Uuid
  environment    String        @db.VarChar(50)
  created_at     DateTime?     @default(now()) @db.Timestamptz(6)
  error_hash     String?
  error_pattern  String?
  is_new_pattern Boolean?      @default(true)
  github_repo    String?
  related_errors Json?
  frequency_data Json?
  domain         String?       @db.VarChar

  @@index([created_at(sort: Desc)])
  @@index([error_type])
  @@index([service_name])
  @@index([severity])
  @@index([error_hash], map: "idx_error_hash")
  @@index([error_pattern], map: "idx_error_pattern")
  @@map("error_logs")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// @client.name="feature_requests"
model FeatureRequests {
  id               String         @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  title            String
  description      String?
  status           String         @default("planned")
  created_at       DateTime?      @default(now()) @db.Timestamptz(6)
  updated_at       DateTime?      @default(now()) @db.Timestamptz(6)
  downvotes        Int?           @default(0)
  engagement_score Int?           @default(0)
  priority_score   Int?           @default(0)
  upvotes          Int?           @default(0)
  feature_votes    FeatureVotes[]

  @@map("feature_requests")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// @client.name="feature_votes"
model FeatureVotes {
  id               String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  feature_id       String          @db.Uuid
  user_id          String          @db.Uuid
  vote_type        Int             @db.SmallInt
  feedback         String?
  created_at       DateTime?       @default(now()) @db.Timestamptz(6)
  updated_at       DateTime?       @default(now()) @db.Timestamptz(6)
  feature_requests FeatureRequests @relation(fields: [feature_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([user_id, feature_id], map: "feature_votes_user_feature_unique")
  @@map("feature_votes")
  @@schema("public")
}

/// @client.name="feed_categories"
model FeedCategories {
  id          BigInt      @id @default(autoincrement())
  created_at  DateTime    @default(now()) @db.Timestamptz(6)
  feed_id     String?     @db.Uuid
  category_id BigInt?
  categories  Categories? @relation(fields: [category_id], references: [id], onDelete: Cascade)
  feeds       Feeds?      @relation(fields: [feed_id], references: [id], onDelete: Cascade)

  @@map("feed_categories")
  @@schema("public")
}

/// @client.name="feed_sources"
model FeedSources {
  id                BigInt          @id @default(autoincrement())
  feed_id           String?         @db.Uuid
  created_at        DateTime        @default(now()) @db.Timestamptz(6)
  content_source_id BigInt?
  feeds             Feeds?          @relation(fields: [feed_id], references: [id], onDelete: Cascade, onUpdate: NoAction)
  content_sources   ContentSources? @relation(fields: [content_source_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_feed_sources_content_sources")

  @@index([feed_id])
  @@index([content_source_id], map: "idx_feed_sources_source_id")
  @@map("feed_sources")
  @@schema("public")
}

/// @client.name="feedbacks"
model Feedbacks {
  id                 Int             @id(map: "feedback_pkey") @default(autoincrement())
  user_id            String?         @db.Uuid
  page_identifier    String          @db.VarChar(255)
  rating             Int?            @default(0)
  feedback_type      FeedbackType?
  message            String
  created_at         DateTime        @default(now()) @db.Timestamptz(6)
  updated_at         DateTime        @default(now()) @db.Timestamptz(6)
  device_info        String?
  resolution_comment String?
  feedback_status    FeedbackStatus? @default(new)
  user_profiles      UserProfiles?   @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "fk_user")

  @@map("feedbacks")
  @@schema("public")
}

/// @client.name="feeds"
model Feeds {
  id              String           @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  created_at      DateTime         @default(now()) @db.Timestamptz(6)
  name            String?
  user_id         String?          @db.Uuid
  feed_categories FeedCategories[]
  feed_sources    FeedSources[]
  user_profiles   UserProfiles?    @relation(fields: [user_id], references: [id], onDelete: Cascade)

  @@map("feeds")
  @@schema("public")
}

/// @client.name="follows"
model Follows {
  id              String         @id @default(dbgenerated("extensions.gen_random_uuid()")) @db.Uuid
  followed_id     String         @db.Uuid
  followed_entity FollowedEntity
  created_at      DateTime?      @default(now()) @db.Timestamptz(6)
  user_id         String         @db.Uuid
  user_profiles   UserProfiles   @relation(fields: [user_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([user_id, followed_id, followed_entity], map: "follows_unique_follower_following_idx")
  @@index([followed_id, followed_entity], map: "idx_follows_followed")
  @@index([user_id], map: "idx_follows_follower")
  @@map("follows")
  @@schema("public")
}

/// @client.name="jobs"
model Jobs {
  id                String          @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  contents_id       String          @id @db.Uuid
  title             String
  company_id        String?         @db.Uuid
  location          String?
  description       String?
  published_at      DateTime?       @db.Timestamptz(6)
  expires_at        DateTime?       @db.Timestamptz(6)
  scraped_at        DateTime?       @default(now()) @db.Timestamptz(6)
  updated_at        DateTime?       @default(now()) @db.Timestamptz(6)
  created_at        DateTime?       @default(now()) @db.Timestamptz(6)
  content_status    ContentStatus   @default(draft)
  content_source_id BigInt?
  url               String
  hash              BigInt?
  employment_type   Json?
  metadata          Json?
  companies         Companies?      @relation(fields: [company_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  content_sources   ContentSources? @relation(fields: [content_source_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  contents          Contents        @relation(fields: [contents_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([url, hash])
  @@index([company_id])
  @@index([content_status])
  @@index([published_at])
  @@map("jobs")
  @@schema("public")
}

/// @client.name="metric_definitions"
model MetricDefinitions {
  id              Int              @id @default(autoincrement())
  name            String           @db.VarChar(255)
  description     String?
  category        String?          @db.VarChar(50)
  type            String           @db.VarChar(50)
  unit            String?          @db.VarChar(50)
  is_dimensional  Boolean?         @default(false)
  company_metrics CompanyMetrics[]
  spider_metrics  SpiderMetrics[]

  @@unique([name, category])
  @@index([name, category], map: "idx_metric_definitions_name_category")
  @@map("metric_definitions")
  @@schema("public")
}

/// @client.name="news"
model News {
  created_at        DateTime        @default(now()) @db.Timestamptz(6)
  updated_at        DateTime        @default(now()) @db.Timestamptz(6)
  title             String?
  body              String?
  category_id       BigInt?         @default(16)
  author            String?
  description       String?
  featured_image    String?
  has_summary       Boolean         @default(false)
  published_at      DateTime?       @db.Timestamptz(6)
  url               String          @unique
  hash              BigInt?
  id                String          @id @unique @db.Uuid
  company_id        String?         @db.Uuid
  failed_count      Int?            @default(0) @db.SmallInt
  scrape_frequency  ScrapeFrequency @default(daily)
  scraped_at        DateTime?       @default(now()) @db.Timestamptz(6)
  content_status    ContentStatus   @default(draft)
  keywords          Json?
  content_source_id BigInt?
  content_sources   ContentSources? @relation(fields: [content_source_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  categories        Categories?     @relation(fields: [category_id], references: [id], map: "public_news_category_id_fkey")
  companies         Companies?      @relation(fields: [company_id], references: [id], onDelete: Cascade, map: "public_news_company_id_fkey")
  contents          Contents        @relation(fields: [id], references: [id], onDelete: Cascade, map: "public_news_id_fkey")
  news_summaries    NewsSummaries[]

  @@index([content_source_id], map: "idx_news_content_source_id")
  @@map("news")
  @@schema("public")
}

/// @client.name="news_summaries"
model NewsSummaries {
  id               String                 @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  news_id          String                 @db.Uuid
  summary          String?
  embedding        Unsupported("vector")?
  version          Int                    @default(1)
  is_current       Boolean?               @default(true)
  created_at       DateTime?              @default(now()) @db.Timestamptz(6)
  updated_at       DateTime?              @default(now()) @db.Timestamptz(6)
  complexity_level ComplexityLevel?       @default(undefined)
  news             News                   @relation(fields: [news_id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "news_summaries_news_fk")

  @@index([is_current])
  @@index([news_id])
  @@map("news_summaries")
  @@schema("public")
}

/// @client.name="news_tags"
model NewsTags {
  id      Int     @id
  tag_id  Int
  news_id String? @db.Uuid
  tags    Tags    @relation(fields: [tag_id], references: [id])

  @@map("news_tags")
  @@schema("public")
}

/// @client.name="newsletters"
model Newsletters {
  id                String        @id @db.Uuid
  title             String        @db.VarChar(255)
  frequency         String        @db.VarChar(50)
  start_date        DateTime      @db.Timestamptz(6)
  end_date          DateTime      @db.Timestamptz(6)
  generated_content String?
  created_at        DateTime?     @default(now()) @db.Timestamptz(6)
  updated_at        DateTime?     @default(now()) @db.Timestamptz(6)
  content_status    ContentStatus @default(draft)
  contents          Contents      @relation(fields: [id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([id], map: "idx_newsletters_id")
  @@map("newsletters")
  @@schema("public")
}

/// @client.name="payment_providers"
model PaymentProviders {
  id                     Int                     @id @default(autoincrement())
  name                   String                  @unique @db.VarChar(50)
  is_active              Boolean?                @default(true)
  created_at             DateTime?               @default(now()) @db.Timestamptz(6)
  updated_at             DateTime?               @default(now()) @db.Timestamptz(6)
  customer_payments      CustomerPayments[]
  customer_subscriptions CustomerSubscriptions[]

  @@map("payment_providers")
  @@schema("public")
}

/// @client.name="plan_permissions"
model PlanPermissions {
  id      Int         @id @default(autoincrement())
  plan    AppPlanEnum
  feature String      @db.VarChar

  @@map("plan_permissions")
  @@schema("public")
}

/// @client.name="referrals"
model Referrals {
  id                  String          @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  referrer_code       String          @db.VarChar(50)
  visitor_id          String          @db.Uuid
  created_at          DateTime?       @default(now()) @db.Timestamptz(6)
  converted_at        DateTime?       @db.Timestamptz(6)
  referral_status     ReferralStatus? @default(pending)
  conversion_value    Decimal?        @db.Decimal(10, 2)
  user_agent          String?
  ip_address          String?         @db.Inet
  landing_page        String?
  utm_source          String?         @db.VarChar(100)
  utm_medium          String?         @db.VarChar(100)
  utm_campaign        String?         @db.VarChar(100)
  device_type         String?         @db.VarChar(50)
  browser             String?         @db.VarChar(50)
  country_code        String?         @db.VarChar(2)
  region              String?         @db.VarChar(100)
  is_suspicious       Boolean?        @default(false)
  security_flags      Json?           @default("[]")
  validation_attempts Int?            @default(0)
  last_failed_attempt DateTime?       @db.Timestamptz(6)
  client_fingerprint  String?

  @@index([created_at], map: "idx_created_at")
  @@index([referrer_code], map: "idx_referrer_code")
  @@index([referral_status], map: "idx_status")
  @@map("referrals")
  @@schema("public")
}

/// @client.name="referrer_blocks"
model ReferrerBlocks {
  id            String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  referrer_code String    @unique(map: "idx_referrer_blocks_code") @db.VarChar(50)
  blocked_at    DateTime? @default(now()) @db.Timestamptz(6)
  blocked_by    String    @db.VarChar(100)
  reason        String?
  is_permanent  Boolean?  @default(true)
  created_at    DateTime? @default(now()) @db.Timestamptz(6)
  updated_at    DateTime? @default(now()) @db.Timestamptz(6)

  @@map("referrer_blocks")
  @@schema("public")
}

/// @client.name="research"
model Research {
  created_at          DateTime            @default(now()) @db.Timestamptz(6)
  updated_at          DateTime?           @db.Timestamptz(6)
  published_at        DateTime?           @db.Timestamptz(6)
  title               String?
  version             Int?                @db.SmallInt
  id                  String              @id @default(dbgenerated("extensions.gen_random_uuid()")) @db.Uuid
  abstract            String?
  keywords            String?
  month               String?             @db.VarChar
  year                String?             @db.VarChar
  abstract_url        String              @unique(map: "research_url_key")
  category            String?
  doi_url             String?
  figure_count        Int?                @db.SmallInt
  has_embedding       Boolean?
  page_count          Int?                @db.SmallInt
  pdf_url             String?             @unique
  published_in        String?
  table_count         Int?                @db.SmallInt
  comments            String?
  is_flagged          Boolean             @default(false)
  authors             Json?
  summary             String?
  content_status      ContentStatus       @default(draft)
  affiliations        Json?
  contents            Contents            @relation(fields: [id], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "research_content_fk")
  research_embeddings ResearchEmbeddings?

  @@map("research")
  @@schema("public")
}

/// @client.name="research_embeddings"
model ResearchEmbeddings {
  id                  Int                    @id @unique @default(autoincrement())
  research_id         String                 @unique @db.Uuid
  chunk               String
  url                 String?                @db.VarChar
  embedding           Unsupported("vector")?
  created_at          DateTime?              @default(now()) @db.Timestamp(6)
  is_flagged          Boolean?               @default(false)
  updated_at          DateTime               @default(now()) @db.Timestamptz(6)
  embedding_review_id BigInt?
  embedding_reviews   EmbeddingReviews?      @relation(fields: [embedding_review_id], references: [id], onDelete: Cascade, map: "public_research_embeddings_embedding_review_id_fkey")
  research            Research               @relation(fields: [research_id], references: [id], onDelete: Cascade)

  @@map("research_embeddings")
  @@schema("public")
}

/// @client.name="responses"
model Responses {
  id         BigInt    @id @unique @default(autoincrement())
  search_id  BigInt
  output     String
  upvotes    Int?      @default(0)
  downvotes  Int?      @default(0)
  created_at DateTime? @default(now()) @db.Timestamptz(6)
  searches   Searches  @relation(fields: [search_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@map("responses")
  @@schema("public")
}

/// @client.name="role_hierarchy"
model RoleHierarchy {
  parent_role AppRoleEnum
  child_role  AppRoleEnum

  @@id([parent_role, child_role])
  @@map("role_hierarchy")
  @@schema("public")
}

/// @client.name="role_permissions"
model RolePermissions {
  id                 Int           @id @default(autoincrement())
  role               AppRoleEnum
  table_name         String
  conditions         Json?         @default("{}")
  permissions        Json?
  cached_permissions Json?
  inherit_from       AppRoleEnum[]
  last_updated       DateTime?     @default(now()) @db.Timestamptz(6)

  @@map("role_permissions")
  @@schema("public")
}

/// @client.name="role_permissions_materialized"
model RolePermissionsMaterialized {
  role         AppRoleEnum @id
  permissions  Json
  last_updated DateTime?   @default(now()) @db.Timestamptz(6)

  @@map("role_permissions_materialized")
  @@schema("public")
}

/// @client.name="scoring_weights"
model ScoringWeights {
  id          String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name        String    @unique
  weight      Float
  description String?
  updated_at  DateTime? @default(now()) @db.Timestamptz(6)

  @@map("scoring_weights")
  @@schema("public")
}

/// @client.name="searches"
model Searches {
  id          BigInt                 @id @default(autoincrement())
  input       String                 @unique
  created_at  DateTime?              @default(now()) @db.Timestamptz(6)
  embedding   Unsupported("vector")?
  tokens_used Int?                   @db.SmallInt
  user_ids    String[]               @db.Uuid
  responses   Responses[]

  @@map("searches")
  @@schema("public")
}

/// @client.name="social_media"
model SocialMedia {
  id            Int         @id @default(autoincrement())
  facebook_url  String?     @db.VarChar(255)
  twitter_url   String?     @db.VarChar(255)
  linkedin_url  String?     @db.VarChar(255)
  instagram_url String?     @db.VarChar(255)
  youtube_url   String?     @db.VarChar
  created_at    DateTime?   @default(now()) @db.Timestamptz(6)
  updated_at    DateTime?   @default(now()) @db.Timestamptz(6)
  companies     Companies[]

  @@map("social_media")
  @@schema("public")
}

/// @client.name="spider_metrics"
model SpiderMetrics {
  id                 BigInt             @id @default(autoincrement())
  crawl_id           String             @db.Uuid
  metric_id          Int?
  timestamp          DateTime           @db.Timestamptz(6)
  value              Json
  metric_definitions MetricDefinitions? @relation(fields: [metric_id], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@index([crawl_id, metric_id, timestamp], map: "idx_spider_metrics_crawl")
  @@map("spider_metrics")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
/// @client.name="strapi_migrations"
model StrapiMigrations {
  id   Int       @id @default(autoincrement())
  name String?   @db.VarChar(255)
  time DateTime? @db.Timestamp(6)

  @@map("strapi_migrations")
  @@schema("public")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
/// @client.name="strapi_migrations_internal"
model StrapiMigrationsInternal {
  id   Int       @id @default(autoincrement())
  name String?   @db.VarChar(255)
  time DateTime? @db.Timestamp(6)

  @@map("strapi_migrations_internal")
  @@schema("public")
}

/// @client.name="table_maintenance_log"
model TableMaintenanceLog {
  id        Int       @id @default(autoincrement())
  operation String?
  detail    String?
  logged_at DateTime? @default(now()) @db.Timestamptz(6)

  @@map("table_maintenance_log")
  @@schema("public")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
/// @client.name="table_query_performance"
model TableQueryPerformance {
  query           String?
  avg_duration    Unsupported("interval")?
  execution_count BigInt?
  capture_time    DateTime?                @db.Timestamptz(6)

  @@map("table_query_performance")
  @@ignore
  @@schema("public")
}

/// The underlying table does not contain a valid unique identifier and can therefore currently not be handled by Prisma Client.
/// @client.name="table_sequence_usage"
model TableSequenceUsage {
  sequence_name String?
  current_value BigInt?
  max_value     BigInt?
  capture_time  DateTime? @default(now()) @db.Timestamptz(6)

  @@map("table_sequence_usage")
  @@ignore
  @@schema("public")
}

/// @client.name="table_statistics"
model TableStatistics {
  table_name             String
  row_count              BigInt?
  table_size             BigInt?
  index_size             BigInt?
  live_tuples            BigInt?
  dead_tuples            BigInt?
  last_vacuum            DateTime? @db.Timestamptz(6)
  last_analyze           DateTime? @db.Timestamptz(6)
  estimated_bloat_ratio  Float?
  buffer_cache_hit_ratio Float?
  index_usage            Json?
  seq_scan_count         BigInt?
  index_scan_count       BigInt?
  capture_time           DateTime  @db.Timestamptz(6)

  @@id([table_name, capture_time])
  @@map("table_statistics")
  @@schema("public")
}

/// @client.name="tags"
model Tags {
  id           Int           @id
  body         String?
  name         String        @unique
  document_id  String?       @db.VarChar(255)
  locale       String?       @db.VarChar(255)
  published_at String?       @db.VarChar(255)
  created_at   DateTime?     @default(now()) @db.Timestamptz(6)
  updated_at   DateTime?     @default(now()) @db.Timestamptz(6)
  content_tags ContentTags[]
  news_tags    NewsTags[]

  @@map("tags")
  @@schema("public")
}

/// @client.name="user_metrics"
model UserMetrics {
  id                 String       @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  user_id            String       @unique @db.Uuid
  total_votes        Int?         @default(0)
  upvote_count       Int?         @default(0)
  downvote_count     Int?         @default(0)
  vote_accuracy      Decimal?     @default(0) @db.Decimal(5, 2)
  current_streak     Int?         @default(0)
  best_streak        Int?         @default(0)
  today_vote_count   Int?         @default(0)
  total_reading_time Int?         @default(0)
  last_vote_date     DateTime?    @db.Timestamptz(6)
  points             Int?         @default(0)
  points_breakdown   Json?        @default("{\"votes\": 0, \"streaks\": 0, \"bookmarks\": 0, \"achievements\": 0, \"perfect_days\": 0, \"source_visits\": 0}")
  interaction_stats  Json?        @default("{\"articles_read\": 0, \"source_visits\": 0, \"total_comments\": 0, \"articles_shared\": 0, \"comment_upvotes\": 0, \"total_bookmarks\": 0, \"favorite_sources\": [], \"categories_engaged\": [], \"peak_activity_hours\": []}")
  achievements       Json?        @default("{\"time\": {\"night_owl\": false, \"full_cycle\": false, \"dawn_patrol\": false, \"lunch_break\": false, \"weekend_warrior\": false}, \"voting\": {\"vote_sage\": false, \"vote_expert\": false, \"vote_legend\": false, \"vote_master\": false, \"vote_initiate\": false, \"vote_enthusiast\": false}, \"sharing\": {\"sharer_i\": false, \"sharer_ii\": false, \"sharer_iii\": false, \"influence_i\": false, \"influence_ii\": false, \"viral_spreader\": false}, \"special\": {\"beta_tester\": false, \"trend_setter\": false, \"early_adopter\": false, \"daily_complete\": false, \"weekly_complete\": false, \"prediction_master\": false}, \"streaks\": {\"streak_legend\": false, \"streak_runner\": false, \"streak_starter\": false, \"streak_champion\": false, \"streak_sprinter\": false, \"streak_marathoner\": false}, \"accuracy\": {\"perfect_day\": false, \"perfect_week\": false, \"accurate_voter_i\": false, \"accurate_voter_ii\": false, \"accurate_voter_iii\": false}, \"beginner\": {\"first_vote\": false, \"first_share\": false, \"first_comment\": false, \"first_bookmark\": false, \"first_source_visit\": false}, \"explorer\": {\"global_viewer\": false, \"source_seeker_i\": false, \"source_seeker_ii\": false, \"source_seeker_iii\": false, \"category_explorer_i\": false, \"category_explorer_ii\": false}, \"bookmarks\": {\"curator\": false, \"collector_i\": false, \"organizer_i\": false, \"collector_ii\": false, \"organizer_ii\": false, \"collector_iii\": false}, \"engagement\": {\"viral_voice\": false, \"commentator_i\": false, \"commentator_ii\": false, \"commentator_iii\": false, \"discussion_starter\": false, \"conversation_master\": false}}")
  titles             Json?        @default("{\"current_title\": \"Stargazer\", \"title_progress\": {}, \"unlocked_titles\": [\"Stargazer\"]}")
  multipliers        Json?        @default("{\"streak_bonus\": 0, \"accuracy_bonus\": 0, \"time_of_day_bonus\": 0, \"current_multiplier\": 1}")
  current_level      Int?         @default(1)
  current_xp         Int?         @default(0)
  xp_to_next_level   Int?         @default(100)
  created_at         DateTime?    @default(now()) @db.Timestamptz(6)
  updated_at         DateTime?    @default(now()) @db.Timestamptz(6)
  user_profiles      UserProfiles @relation(fields: [user_id], references: [id], onDelete: Cascade)

  @@index([current_streak], map: "idx_user_metrics_current_streak")
  @@index([points], map: "idx_user_metrics_points")
  @@index([total_votes], map: "idx_user_metrics_total_votes")
  @@index([user_id], map: "idx_user_metrics_user_id")
  @@map("user_metrics")
  @@schema("public")
}

/// @client.name="user_profiles"
model UserProfiles {
  id                     String                  @id @unique(map: "users_auth_id_key") @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  email                  String                  @unique(map: "users_email_key")
  given_name             String?
  surname                String?
  username               String?                 @db.VarChar
  dob                    DateTime?               @db.Date
  gender_id              Int?                    @db.SmallInt
  created_at             DateTime?               @default(now()) @db.Timestamptz(6)
  updated_at             DateTime?               @default(now()) @db.Timestamptz(6)
  last_seen              DateTime?               @default(now()) @db.Timestamptz(6)
  avatar                 String?
  introduction           String?
  followed_count         Int?                    @default(0)
  followers_count        Int?                    @default(0)
  plan                   AppPlanEnum?            @default(free)
  role                   AppRoleEnum             @default(user)
  is_active              Boolean?                @default(false)
  addresses              Addresses[]
  comments               Comments[]
  company_employees      CompanyEmployees[]
  contacts               Contacts[]
  content_source_visits  ContentSourceVisits[]
  customer_payments      CustomerPayments[]
  customer_subscriptions CustomerSubscriptions[]
  feedbacks              Feedbacks[]
  feeds                  Feeds[]
  follows                Follows[]
  user_metrics           UserMetrics?
  users                  Users                   @relation(fields: [id], references: [id], onDelete: Cascade, map: "public_user_profiles_id_fkey")

  @@map("user_profiles")
  @@schema("public")
}

/// This table contains check constraints and requires additional setup for migrations. Visit https://pris.ly/d/check-constraints for more info.
/// @client.name="votes"
model Votes {
  id           String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  content_type String
  content_id   String    @db.Uuid
  user_id      String    @db.Uuid
  vote_type    Int       @db.SmallInt
  created_at   DateTime? @default(now()) @db.Timestamptz(6)
  users        Users     @relation(fields: [user_id], references: [id], onDelete: Cascade)

  @@unique([content_type, content_id, user_id], map: "votes_unique_user_content_vote_idx")
  @@index([content_type, content_id], map: "idx_votes_content")
  @@index([user_id], map: "idx_votes_user")
  @@map("votes")
  @@schema("public")
}

/// @client.name="workflows"
model Workflows {
  id           String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  name         String
  status       JobStatus @default(created)
  metadata     Json?
  started_at   DateTime? @db.Timestamptz(6)
  completed_at DateTime? @db.Timestamptz(6)
  created_at   DateTime? @default(now()) @db.Timestamptz(6)
  updated_at   DateTime? @default(now()) @db.Timestamptz(6)

  @@map("workflows")
  @@schema("public")
}

view security_metrics {
  time_bucket         DateTime @id @db.Timestamptz(6)
  total_attempts      BigInt?
  suspicious_attempts BigInt?
  unique_ips          BigInt?
  unique_referrers    BigInt?
  high_attempt_count  BigInt?
  max_attempts        Int?

  @@schema("public")
}

view error_frequency {
  service_name String        @db.VarChar(100)
  error_type   ErrorType
  severity     ErrorSeverity
  time_bucket  DateTime      @id @db.Timestamptz(6)
  error_count  BigInt?

  @@schema("public")
}

view error_stats {
  calls          BigInt?
  mean_exec_time Float?
  max_exec_time  Float?
  rows           BigInt?
  query          String
  queryid        BigInt   @id
  toplevel       Boolean?

  @@schema("public")
}

view recent_errors {
  id           String        @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  created_at   DateTime      @db.Timestamptz(6)
  service_name String        @db.VarChar(100)
  error_type   ErrorType
  severity     ErrorSeverity
  message      String
  metadata     Json?

  @@schema("public")
}

view slow_query_patterns {
  query_id         String   @id
  occurrence_count BigInt?
  avg_exec_time    Float?
  max_exec_time    Float?
  first_seen       DateTime @db.Timestamptz(6)
  last_seen        DateTime @db.Timestamptz(6)

  @@schema("public")
}

view error_metrics {
  time_bucket  DateTime      @id @db.Timestamptz(6)
  service_name String        @db.VarChar(100)
  error_type   ErrorType
  severity     ErrorSeverity
  error_count  BigInt?

  @@schema("public")
}

/// @client.name="access_level"
enum AccessLevel {
  viewer
  editor
  admin
  super_admin

  @@map("access_level")
  @@schema("public")
}

/// @client.name="address_type"
enum AddressType {
  residential
  headquarters
  office
  factory
  lab
  warehouse
  research
  retail
  showroom
  branch

  @@map("address_type")
  @@schema("public")
}

/// @client.name="app_plan_enum"
enum AppPlanEnum {
  free
  basic
  intermediate
  premium
  enterprise
  custom

  @@map("app_plan_enum")
  @@schema("public")
}

/// @client.name="app_role_enum"
enum AppRoleEnum {
  guest
  user
  astroguide
  mentor
  moderator
  tenant_member
  tenant_admin
  tenant_super_admin
  admin
  super_admin
  service_role

  @@map("app_role_enum")
  @@schema("public")
}

/// @client.name="complexity_level"
enum ComplexityLevel {
  beginner
  intermediate
  expert
  undefined

  @@map("complexity_level")
  @@schema("public")
}

/// @client.name="contact_type"
enum ContactType {
  personal
  company
  professional
  recruitment
  founder

  @@map("contact_type")
  @@schema("public")
}

/// @client.name="content_status"
enum ContentStatus {
  draft
  pending_agent_action
  pending_agent_review
  pending_human_review
  pending_relevance_check
  irrelevant
  scheduled
  unpublished
  archived
  published
  failed
  pending_crawl
  scraped
  outdated
  updated
  new

  @@map("content_status")
  @@schema("public")
}

/// @client.name="content_type"
enum ContentType {
  news
  events
  jobs
  research
  companies
  contact
  people
  newsletters
  unknown

  @@map("content_type")
  @@schema("public")
}

/// @client.name="discount_period"
enum DiscountPeriod {
  yearly
  monthly
  once

  @@map("discount_period")
  @@schema("public")
}

/// @client.name="discount_type"
enum DiscountType {
  percentage
  flat

  @@map("discount_type")
  @@schema("public")
}

/// @client.name="error_severity"
enum ErrorSeverity {
  low
  medium
  high
  critical

  @@map("error_severity")
  @@schema("public")
}

/// @client.name="error_type"
enum ErrorType {
  UPLOAD_ERROR
  CONNECTION_ERROR
  AUTHENTICATION_ERROR
  VALIDATION_ERROR
  NOT_FOUND_ERROR
  SERVER_ERROR
  NETWORK_ERROR
  DATABASE_ERROR
  UNKNOWN_ERROR
  SLOW_QUERY
  ERROR_SPIKE
  AUTH_ERROR
  TABLE_ERROR
  TABLE_OPERATION

  @@map("error_type")
  @@schema("public")
}

/// @client.name="feedback_status"
enum FeedbackStatus {
  new
  under_review
  backlog
  working_on
  resolved
  rejected
  deferred

  @@map("feedback_status")
  @@schema("public")
}

/// @client.name="feedback_type"
enum FeedbackType {
  bug_report
  feature_request
  user_interface_issue
  performance_issue
  documentation

  @@map("feedback_type")
  @@schema("public")
}

/// @client.name="followed_entity"
enum FollowedEntity {
  company
  user

  @@map("followed_entity")
  @@schema("public")
}

/// @client.name="job_priority"
enum JobPriority {
  critical
  high
  normal
  low

  @@map("job_priority")
  @@schema("public")
}

/// @client.name="job_status"
enum JobStatus {
  created
  active
  completed
  failed
  cancelled
  expired

  @@map("job_status")
  @@schema("public")
}

/// @client.name="news_importance_level"
enum NewsImportanceLevel {
  high
  medium
  low

  @@map("news_importance_level")
  @@schema("public")
}

/// @client.name="news_relation_type"
enum NewsRelationType {
  source
  topic
  mention

  @@map("news_relation_type")
  @@schema("public")
}

/// @client.name="priority"
enum Priority {
  very_low
  low
  medium
  high
  critical

  @@map("priority")
  @@schema("public")
}

/// @client.name="privacy_level"
enum PrivacyLevel {
  private
  connected
  public

  @@map("privacy_level")
  @@schema("public")
}

/// @client.name="referral_status"
enum ReferralStatus {
  pending
  converted
  abandoned

  @@map("referral_status")
  @@schema("public")
}

/// @client.name="scrape_frequency"
enum ScrapeFrequency {
  four_times_daily
  twice_daily
  daily
  twice_weekly
  weekly
  bi_weekly
  monthly
  quarterly
  biannual
  annually
  never

  @@map("scrape_frequency")
  @@schema("public")
}

/// @client.name="user_status"
enum UserStatus {
  online
  offline

  @@map("user_status")
  @@schema("public")
}

/// @client.name="users"
model Users {
  id              String            @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  BookmarkFolders BookmarkFolders[]
  Bookmarks       Bookmarks[]
  UserProfiles    UserProfiles?
  Votes           Votes[]

  @@map("users")
  @@schema("auth")
}
